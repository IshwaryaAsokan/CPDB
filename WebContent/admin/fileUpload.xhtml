<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/template/template.xhtml">

	<ui:define name="content">
		<p:growl id="messages" showDetail="true" />

		<div style="width: 100%;">
			<div style="float: left; width: 17%"></div>
			<div style="float: left; width: 83%">
				<h3>
					<p:outputLabel
						value="Part Number Add - Step 1 - Import Excel Spreadsheet"></p:outputLabel>
				</h3>
				<h:form enctype="multipart/form-data" prependId="false">


					<h:panelGrid columns="3">
						<p:outputLabel value="Choose File Type">
						</p:outputLabel>
						<h:selectOneRadio value="#{fileUploadView.uploadType}" onclick="javascript:showTable(this.value);" >
							<f:selectItem itemValue="P" itemLabel="Part" />
							<f:selectItem itemValue="C" itemLabel="Cross Selling" />
						</h:selectOneRadio>
					</h:panelGrid>

					<h:panelGrid columns="2">
						<p:outputLabel value="File To Import"></p:outputLabel>
						<p:fileUpload value="#{fileUploadView.file}" mode="simple"
							allowTypes="/(\.|\/)(xlsx)$/" />

						<p:outputLabel value="Location"></p:outputLabel>
						<p:selectOneMenu id="country" value="#{fileUploadView.schemaName}"
							style="width:150px" >
							<f:selectItem itemLabel="PUNI" itemValue="PUNI" selected="true" />
							<f:selectItem itemLabel="PCEN" itemValue="PCEN" />
						</p:selectOneMenu>
					</h:panelGrid>

					<div>
						<p:commandButton value="Submit" ajax="false"
							actionListener="#{fileUploadView.upload}"
							oncomplete="drawTable()" />
					</div>

					<br> </br>


					<h:inputHidden id="csJsonString" value="#{fileUploadView.jsonValue}"></h:inputHidden>
					
					<p:dataTable var="item" value="#{fileUploadView.items}" id = "csTable" style="display:none;">
						<p:column headerText="Cross Selling Master">
							<h:outputText value="#{item.parentId}" />
						</p:column>

						<p:column headerText="Cross Selling Child">
							<h:outputText value="#{item.itemType}" />
						</p:column>

						<p:column headerText="Cross Selling Type">
							<h:outputText value="#{item.crossSellType}" />
						</p:column>

						<p:column headerText="Action">
							<h:outputText value="#{item.action}" />
						</p:column>
					</p:dataTable>
					
					
					<h:inputHidden id="jsonString" value="#{fileUploadView.jsonValue}" ></h:inputHidden>
					<p:dataTable var="csItem" value="#{fileUploadView.items}" id="partTable" style="display:none;">
					    <p:column headerText="Item Id">
					        <h:outputText value="#{item.itemName}" />
					    </p:column>
					 
					    <p:column headerText="Item Type">
					        <h:outputText value="#{item.itemType}" />
					    </p:column>
					    
					    <p:column headerText="Parent">
					        <h:outputText value="#{item.parentId}" />
					    </p:column>
					 
					    <p:column headerText="Status Level" sortBy="#{item.statusLevel}">
					        <h:outputText value="#{item.statusLevel}" />
					    </p:column>
					 
					    <p:column headerText="Status Message" sortBy="#{item.statusMessage}">
					        <h:outputText value="#{item.statusMessage}" />
					    </p:column>
					</p:dataTable>
					</h:form>
				
				<div id="msg"></div>

			</div>
			<script type="text/javascript">
			jQuery(document).ready(function() {
	    		//drawTable()
	    	});
	function drawTable() {
		alert("draw table");
		var data = jQuery('#jsonString').val(); 
		data = jQuery.parseJSON(data);
	}

	function showTable(type)
	{
		alert('NISHA');
		alert(type);
		
	if(type =='P')
	{
	document.getElementById("partTable").style.display="block";
	document.getElementById("csTable").style.display="none";
	}
	else
	{
	document.getElementById("csTable").style.display="block";
	document.getElementById("partTable").style.display="none";
	}
	}
	</script>
		</div>
		<div style="clear: both"></div>

	</ui:define>
</ui:composition>